--- pslib-0.4.1/src/ps_afm.c~	2007-07-11 20:18:00.000000000 +0200
+++ pslib-0.4.1/src/ps_afm.c	2009-07-14 22:03:32.435907834 +0200
@@ -138,7 +138,7 @@
 	return (int)(acc>=0? floor(acc+0.5) : ceil(acc-0.5) ) ;
 }
 
-static int getline(FILE *afmin) {
+static int xgetline(FILE *afmin) {
 	char *p ;
 	int c ;
 
@@ -616,7 +616,7 @@
 		return(-1);
 	}
 
-	while (getline(fp)) {
+	while (xgetline(fp)) {
 		switch(interest(paramstring())) {
 			case N:
 				handleprotusion(psdoc, metrics) ;
@@ -664,7 +664,7 @@
 	/*
 	 * Read file line by line.
 	 */
-	while (getline(metric->afmin)) {
+	while (xgetline(metric->afmin)) {
 		switch(interest(paramstring())) {
 case FontName:
 			metric->fontname = paramnewstring(psdoc) ;
@@ -1039,7 +1039,7 @@
 
 	while (1) {
 		while (param == NULL || *param == '\0') {
-			if (getline(metrics->afmin) == 0)
+			if (xgetline(metrics->afmin) == 0)
 				ps_error(psdoc, PS_RuntimeError, _("Premature end of encoding file."));
 			for (p=buffer; *p != '\0'; p++)
 				if (*p == '%') {
@@ -1160,7 +1160,7 @@
 			psdoc->free(psdoc, e);
 			return -1;
 		}
-		while (getline(metrics->afmin)) {
+		while (xgetline(metrics->afmin)) {
 			for (p=buffer; *p != '\0'; p++)
 				if (*p == '%') {
 					if (ignoreligkern == 0)
